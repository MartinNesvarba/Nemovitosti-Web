<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Španělsko & Bulharsko | Apartmány a Vily</title>
    <!-- SEO: Přidán meta tag pro popis stránky -->
    <meta name="description" content="Objevte exkluzivní vily ve Španělsku a moderní apartmány v Bulharsku. Váš nový domov nebo investice na dosah.">
    <meta name="keywords" id="meta-keywords" content="nemovitosti, reality, zahraničí, investice">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Optimalizace: Asynchronní načítání písem, aby neblokovalo vykreslování -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap"></noscript>
    
    <!-- Optimalizace: Přednačtení klíčových obrázků na pozadí -->
    <link rel="preload" as="image" href="španělsko.png">
    <link rel="preload" as="image" href="Bulharsko.png">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .text-shadow {
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
        }
        .bg-half {
            transition: filter 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .group:hover .bg-spain:not(:hover) {
             filter: brightness(0.5);
        }
        .group:hover .bg-bulgaria:not(:hover) {
            filter: brightness(0.5);
        }
        .lang-btn {
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.2s ease-in-out;
            border-radius: 0.25rem; /* OPRAVA: Změněno z kruhu na zaoblený čtverec */
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0); /* Initial transparent ring */
        }
        .lang-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        .lang-btn.active {
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.9); /* White ring for active language */
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <main class="relative min-h-screen flex flex-col md:flex-row group overflow-hidden">

        <!-- Levá polovina - Španělsko -->
        <!-- Doporučení: Nahraďte 'španělsko.png' optimalizovaným obrázkem (např. WebP) s menší velikostí souboru pro rychlejší načítání. -->
        <section
            class="w-full md:w-1/2 min-h-[50vh] md:min-h-screen bg-cover bg-center relative bg-half bg-spain"
            style="background-image: url(španělsko.png);"
            aria-label="Pohled na pobřeží a vily ve Španělsku">
            <div class="absolute inset-0 bg-black bg-opacity-40"></div>
        </section>

        <!-- Pravá polovina - Bulharsko -->
        <!-- Doporučení: Nahraďte 'Bulharsko.png' optimalizovaným obrázkem (např. WebP) s menší velikostí souboru pro rychlejší načítání. -->
        <section
            class="w-full md:w-1/2 min-h-[50vh] md:min-h-screen bg-cover bg-center relative bg-half bg-bulgaria"
            style="background-image: url(Bulharsko.png);"
            aria-label="Pohled na pláž v Bulharsku při západu slunce">
            <div class="absolute inset-0 bg-black bg-opacity-40"></div>
        </section>

        <div class="absolute top-0 left-0 w-full h-full z-10 flex flex-col items-center justify-center p-4">

            <nav class="absolute top-5 right-5 flex items-center gap-4">
                <!-- Přístupnost: Přidány aria-label pro screen readery -->
                <button data-lang="cz" class="lang-btn" aria-label="Změnit jazyk na češtinu"><img src="https://flagcdn.com/w40/cz.png" alt="Čeština" class="w-8 h-8 object-cover pointer-events-none"></button>
                <button data-lang="en" class="lang-btn" aria-label="Change language to English"><img src="https://flagcdn.com/w40/gb.png" alt="English" class="w-8 h-8 object-cover pointer-events-none"></button>
                <button data-lang="de" class="lang-btn" aria-label="Sprache auf Deutsch ändern"><img src="https://flagcdn.com/w40/de.png" alt="Deutsch" class="w-8 h-8 object-cover pointer-events-none"></button>
            </nav>

            <div class="text-center flex flex-col items-center">
                <h1 id="main-headline" class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black mb-8 text-shadow uppercase tracking-wider"></h1>
                <p id="sub-headline" class="text-lg md:text-xl text-gray-200 mb-12 max-w-2xl text-shadow"></p>

                <div class="flex flex-col md:flex-row gap-4 w-full sm:w-auto">
                    <a id="spain-button" href="spanelsko.html" class="bg-transparent border-2 border-white text-white font-bold text-lg py-3 px-8 rounded-lg hover:bg-white hover:text-gray-900 transition-all duration-300 transform hover:scale-105 shadow-lg"></a>
                    <a id="bulgaria-button" href="bulharsko.html" class="bg-transparent border-2 border-white text-white font-bold text-lg py-3 px-8 rounded-lg hover:bg-white hover:text-gray-900 transition-all duration-300 transform hover:scale-105 shadow-lg"></a>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Optimalizace: Odložení načítání skriptu pomocí 'defer' -->
    <script type="module" defer>
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const translations = {
            cz: {
                title: "Španělsko & Bulharsko | Apartmány a Vily",
                mainHeadline: "Vaše dovolená snů",
                subHeadline: "Objevte exkluzivní vily ve Španělsku a moderní apartmány v Bulharsku.",
                spainButton: "Vily ve Španělsku",
                bulgariaButton: "Apartmány v Bulharsku"
            },
            en: {
                title: "Spain & Bulgaria | Apartments and Villas",
                mainHeadline: "Your Dream Holiday",
                subHeadline: "Discover exclusive villas in Spain and modern apartments in Bulgaria.",
                spainButton: "Villas in Spain",
                bulgariaButton: "Apartments in Bulgaria"
            },
            de: {
                title: "Spanien & Bulgarien | Ferienwohnungen und Villen",
                mainHeadline: "Ihr Traumurlaub",
                subHeadline: "Entdecken Sie exklusive Villen in Spanien und moderne Apartments in Bulgarien.",
                spainButton: "Villen in Spanien",
                bulgariaButton: "Wohnungen in Bulgarien"
            }
        };

        const elements = {
            mainHeadline: document.getElementById('main-headline'),
            subHeadline: document.getElementById('sub-headline'),
            spainButton: document.getElementById('spain-button'),
            bulgariaButton: document.getElementById('bulgaria-button')
        };
        const langButtons = document.querySelectorAll('.lang-btn');

        function updateContent(lang) {
            if (!translations[lang]) {
                console.warn(`Translation for language "${lang}" not found.`);
                lang = 'cz'; // Fallback
            }
            
            document.title = translations[lang].title;
            elements.mainHeadline.textContent = translations[lang].mainHeadline;
            elements.subHeadline.textContent = translations[lang].subHeadline;
            elements.spainButton.textContent = translations[lang].spainButton;
            elements.bulgariaButton.textContent = translations[lang].bulgariaButton;
            
            elements.spainButton.href = `spanelsko.html?lang=${lang}`;
            elements.bulgariaButton.href = `bulharsko.html?lang=${lang}`;

            localStorage.setItem('preferredLanguage', lang);

            langButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
        }
        
        async function initializeFirebase() {
            try {
                const firebaseConfig = typeof __firebase_config !== 'undefined' 
                    ? JSON.parse(__firebase_config) 
                    : { apiKey: "YOUR_API_KEY", authDomain: "YOUR_AUTH_DOMAIN", projectId: "YOUR_PROJECT_ID" }; // Fallback

                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const auth = getAuth(app);
                
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
                console.log('Firebase auth successful. User UID:', auth.currentUser?.uid);

            } catch (error) {
                console.error("Firebase initialization failed:", error);
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            langButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const selectedLang = e.currentTarget.dataset.lang;
                    updateContent(selectedLang);
                });
            });

            const urlParams = new URLSearchParams(window.location.search);
            const langFromUrl = urlParams.get('lang');
            const savedLang = localStorage.getItem('preferredLanguage');
            const initialLang = langFromUrl || savedLang || 'cz';
            
            updateContent(initialLang);
            
            initializeFirebase();
        });

    </script>
</body>
</html>

